function saveOrder(){$(".column-portlet").each(function(e,o){for(var i=o.id,t="cookie-"+i,n=$("#"+i).sortable("toArray"),l=0,r=n.length;l<r;l++){var c=$("#"+n[l]).find(".card-section").is(":visible");n[l]=n[l]+":"+c}$.cookie(t,n,{path:"/",expires:new Date(2055,2,1)})})}function restoreOrder(){$(".column-portlet").each(function(e,o){var i=o.id,t="cookie-"+i,n=$.cookie(t);if(null!=n)for(var l=n.split(","),r=0,c=l.length;r<c;r++){var a=l[r].split(":");if(2==a.length){var s=a[0],u=a[1],d=$(".column-portlet").find("#"+s).appendTo($("#"+i));"false"===u&&(d.find(".ui-icon").toggleClass("ui-icon-minus"),d.find(".ui-icon").toggleClass("ui-icon-plus"),d.find(".portlet-content").hide())}}})}$(function(){$(".column-portlet").sortable({connectWith:".column-portlet",placeholder:".ui-sortable-placeholder ui-corner-all",stop:function(){saveOrder()}}),$(".portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(".portlet-header").addClass("ui-widget-header ui-corner-all").prepend('<span class="ui-icon ui-icon-minus portlet-toggle"></span>').end().find(".portlet-content"),restoreOrder(),$(".portlet-toggle").on("click",function(){var e=$(this);e.toggleClass("ui-icon-minusthick ui-icon-plusthick"),e.closest(".portlet").find(".card-section").toggle(),saveOrder()})});