var FORM_MANAGER_CONDITION_SEPARATOR=" AND ",FORM_MANAGER_POSSIBILITY_SEPARATOR=" OR ",FORM_MANAGER_NAME_VALUE_SEPARATOR=" BEING ",FORM_MANAGER_DEPENDS="DEPENDS ON ",FORM_MANAGER_CONFLICTS="CONFLICTS WITH ",FORM_MANAGER_EMPTY="EMPTY";function addEvent(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent){addEvent.events.push({element:e,event:t,handler:n}),e.attachEvent("on"+t,function(){n.apply(e)})}else e["on"+t]=n}function addEvents(e,t,n){for(var a=0;a<e.length;++a)for(var l=0;l<t.length;++l)addEvent(e[a],t[l],n)}function getRadioValue(e){if(!e.length)return null;for(var t=0;t<e.length;++t)if(e[t].checked)return e[t].value;return null}function getSelectValue(e){return e.tagName&&"select"===e.tagName.toLowerCase()?e.options[e.selectedIndex].value:null}function isElementValue(e,t){return t===FORM_MANAGER_EMPTY&&(t=""),getRadioValue(e)==t||getSelectValue(e)==t||e.tagName&&"select"!==e.tagName.toLowerCase()&&e.value==t}function setupDependencies(){for(var e=function(){this.style.display="","label"==this.parentNode.tagName.toLowerCase()&&(this.parentNode.style.display="")},t=function(){this.style.display="none",void 0!==this.checked?this.checked=!1:this.value="","label"==this.parentNode.tagName.toLowerCase()&&(this.parentNode.style.display="none"),this.hidden=!0},n=function(){for(var e=0,t=this.elements;e<t.length;++e){t[e].hidden=!1;for(var n=0,a=t[e].className.split(FORM_MANAGER_CONDITION_SEPARATOR);n<a.length;++n)if(0===a[n].indexOf(FORM_MANAGER_DEPENDS))for(var l=0,i=a[n].substr(FORM_MANAGER_DEPENDS.length).split(FORM_MANAGER_POSSIBILITY_SEPARATOR);l<i.length;++l)if(-1===i[l].indexOf(FORM_MANAGER_NAME_VALUE_SEPARATOR)){if(t[i[l]]&&t[i[l]].checked)break;l+1==i.length&&t[e].hide()}else{var s=(d=i[l].split(FORM_MANAGER_NAME_VALUE_SEPARATOR))[1];if(t[d=d[0]]){if(isElementValue(t[d],s))break;l+1==i.length&&t[e].hide()}}else if(0===a[n].indexOf(FORM_MANAGER_CONFLICTS))if(-1===a[n].indexOf(FORM_MANAGER_NAME_VALUE_SEPARATOR)){if(t[a[n].substr(FORM_MANAGER_CONFLICTS.length)]&&t[a[n].substr(FORM_MANAGER_CONFLICTS.length)].checked){t[e].hide();break}}else{var d;s=(d=a[n].substr(FORM_MANAGER_CONFLICTS.length).split(FORM_MANAGER_NAME_VALUE_SEPARATOR))[1];if(t[d=d[0]]&&isElementValue(t[d],s)){t[e].hide();break}}t[e].hidden||t[e].show()}},a=function(){return this.form.calculateDependencies(),!0},l=0;l<arguments.length;++l){for(var i=0,s=window.document.forms[arguments[l]].elements;i<s.length;++i)addEvents([s[i]],["change","keyup","focus","click","keydown"],a),s[i].hide=t,s[i].show=e;(s=window.document.forms[arguments[l]]).calculateDependencies=n,s.calculateDependencies()}}addEvent.events=[],void 0!==window.event&&addEvent(window,"unload",function(){for(var e=0,t=addEvent.events;e<t.length;++e)t[e].element.detachEvent("on"+t[e].event,t[e].handler)});