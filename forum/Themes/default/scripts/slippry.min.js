/**
 * @preserve
 *
 * slippry v1.2.1 - Simple responsive content slider
 * http://slippry.com
 *
 * Author(s): Lukas Jakob Hafner - @saftsaak 
 *
 * Copyright 2013, booncon oy - http://booncon.com
 *
 * Thanks @ http://bxslider.com for the inspiration!
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */

(function(e){"use strict";var t;t={slippryWrapper:'<div class="sy-box" />',slideWrapper:'<div class="sy-slides-wrap" />',slideCrop:'<div class="sy-slides-crop" />',boxClass:"sy-list",elements:"li",activeClass:"sy-active",fillerClass:"sy-filler",loadingClass:"sy-loading",adaptiveHeight:false,start:1,loop:true,captionsSrc:"img",captions:"overlay",captionsEl:".sy-caption",initSingle:true,responsive:true,preload:"visible",pager:true,pagerClass:"sy-pager",controls:false,controlClass:"sy-controls",prevClass:"sy-prev",prevText:"Previous",nextClass:"sy-next",nextText:"Next",hideOnEnd:true,transition:"fade",kenZoom:120,slideMargin:0,transClass:"transition",speed:800,easing:"swing",continuous:true,useCSS:true,auto:true,autoDirection:"next",autoHover:true,autoHoverDelay:100,autoDelay:500,pause:4e3,onSliderLoad:function(){return this},onSlideBefore:function(){return this},onSlideAfter:function(){return this}};e.fn.slippry=function(n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;i=this;if(i.length===0){return this}if(i.length>1){i.each(function(){e(this).slippry(n)});return this}r={};r.vars={};p=function(){var e,t,n;t=document.createElement("div");n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionEnd transitionend"};for(e in n){if(t.style[e]!==undefined){return n[e]}}};E=function(){var e=document.createElement("div"),t=["Khtml","Ms","O","Moz","Webkit"],n=t.length;return function(r){if(r in e.style){return true}r=r.replace(/^[a-z]/,function(e){return e.toUpperCase()});while(n--){if(t[n]+r in e.style){return true}}return false}}();T=function(t,n){var r,i,s,o;r=n.split(".");i=e(t);s="";o="";e.each(r,function(e,t){if(t.indexOf("#")>=0){s+=t.replace(/^#/,"")}else{o+=t+" "}});if(s.length){i.attr("id",s)}if(o.length){i.attr("class",e.trim(o))}return i};N=function(){var e,t,n,i;n={};i={};e=100-r.settings.kenZoom;i.width=r.settings.kenZoom+"%";if(r.vars.active.index()%2===0){i.left=e+"%";i.top=e+"%";n.left="0%";n.top="0%"}else{i.left="0%";i.top="0%";n.left=e+"%";n.top=e+"%"}t=r.settings.pause+r.settings.speed*2;r.vars.active.css(i);r.vars.active.animate(n,{duration:t,easing:r.settings.easing,queue:false})};c=function(){if(r.vars.fresh){r.vars.slippryWrapper.removeClass(r.settings.loadingClass);r.vars.fresh=false;if(r.settings.auto){i.startAuto()}if(!r.settings.useCSS&&r.settings.transition==="kenburns"){N()}r.settings.onSliderLoad.call(undefined,r.vars.active.index())}else{e("."+r.settings.fillerClass,r.vars.slideWrapper).addClass("ready")}};m=function(t,n){var i,s,o;i=t/n;s=1/i*100+"%";o=e("."+r.settings.fillerClass,r.vars.slideWrapper);o.css({paddingTop:s});c()};o=function(t){var n,r;if(e("img",t).attr("src")!==undefined){e("<img />").load(function(){n=t.width();r=t.height();m(n,r)}).attr("src",e("img",t).attr("src"))}else{n=t.width();r=t.height();m(n,r)}};s=function(){if(e("."+r.settings.fillerClass,r.vars.slideWrapper).length===0){r.vars.slideWrapper.append(e('<div class="'+r.settings.fillerClass+'" />'))}if(r.settings.adaptiveHeight===true){o(e("."+r.settings.activeClass,i))}else{var t,n,s;n=0;s=0;e(r.vars.slides).each(function(){if(e(this).height()>n){t=e(this);n=t.height()}s=s+1;if(s===r.vars.count){if(t===undefined){t=e(e(r.vars.slides)[0])}o(t)}})}};v=function(){if(r.settings.pager){e("."+r.settings.pagerClass+" li",r.vars.slippryWrapper).removeClass(r.settings.activeClass);e(e("."+r.settings.pagerClass+" li",r.vars.slippryWrapper)[r.vars.active.index()]).addClass(r.settings.activeClass)}};b=function(){if(!r.settings.loop&&r.settings.hideOnEnd){e("."+r.settings.prevClass,r.vars.slippryWrapper)[r.vars.first?"hide":"show"]();e("."+r.settings.nextClass,r.vars.slippryWrapper)[r.vars.last?"hide":"show"]()}};a=function(){var t,n;if(r.settings.captions!==false){if(r.settings.captionsSrc!=="img"){t=r.vars.active.attr("title")}else{t=e("img",r.vars.active).attr("title")!==undefined?e("img",r.vars.active).attr("title"):e("img",r.vars.active).attr("alt")}if(r.settings.captions!=="custom"){n=e(r.settings.captionsEl,r.vars.slippryWrapper)}else{n=e(r.settings.captionsEl)}if(t!==undefined&&t!==""){n.html(t).show()}else{n.hide()}}};i.startAuto=function(){if(r.vars.timer===undefined&&r.vars.delay===undefined){r.vars.delay=window.setTimeout(function(){r.vars.autodelay=false;r.vars.timer=window.setInterval(function(){r.vars.trigger="auto";i.goToSlide(r.settings.autoDirection)},r.settings.pause)},r.vars.autodelay?r.settings.autoHoverDelay:r.settings.autoDelay)}if(r.settings.autoHover){r.vars.slideWrapper.unbind("mouseenter").unbind("mouseleave").bind("mouseenter",function(){if(r.vars.timer!==undefined){r.vars.hoverStop=true;i.stopAuto()}else{r.vars.hoverStop=false}}).bind("mouseleave",function(){if(r.vars.hoverStop){r.vars.autodelay=true;i.startAuto()}})}};i.stopAuto=function(){window.clearInterval(r.vars.timer);r.vars.timer=undefined;window.clearTimeout(r.vars.delay);r.vars.delay=undefined};i.refresh=function(){r.vars.slides.removeClass(r.settings.activeClass);r.vars.active.addClass(r.settings.activeClass);if(r.settings.responsive){s()}else{c()}b();v();a()};y=function(){i.refresh()};h=function(){r.vars.moving=false;r.vars.active.removeClass(r.settings.transClass);if(!r.vars.fresh){r.vars.old.removeClass("sy-ken")}r.vars.old.removeClass(r.settings.transClass);r.settings.onSlideAfter.call(undefined,r.vars.active,r.vars.old.index(),r.vars.active.index())};g=function(){var t,n,s,o,u,a,f;r.settings.onSlideBefore.call(undefined,r.vars.active,r.vars.old.index(),r.vars.active.index());if(r.settings.transition!==false){r.vars.moving=true;if(r.settings.transition==="fade"||r.settings.transition==="kenburns"){if(r.vars.fresh){if(r.settings.useCSS){r.vars.slides.css({transitionDuration:r.settings.speed+"ms",opacity:0})}else{r.vars.slides.css({opacity:0})}r.vars.active.css("opacity",1);if(r.settings.transition==="kenburns"){if(r.settings.useCSS){u=r.settings.pause+r.settings.speed*2;r.vars.slides.css({animationDuration:u+"ms"});r.vars.active.addClass("sy-ken")}}h()}else{if(r.settings.useCSS){r.vars.old.addClass(r.settings.transClass).css("opacity",0);r.vars.active.addClass(r.settings.transClass).css("opacity",1);if(r.settings.transition==="kenburns"){r.vars.active.addClass("sy-ken")}e(window).off("focus").on("focus",function(){if(r.vars.moving){r.vars.old.trigger(r.vars.transition)}});r.vars.old.one(r.vars.transition,function(){h();return this})}else{if(r.settings.transition==="kenburns"){N()}r.vars.old.addClass(r.settings.transClass).animate({opacity:0},r.settings.speed,r.settings.easing,function(){h()});r.vars.active.addClass(r.settings.transClass).css("opacity",0).animate({opacity:1},r.settings.speed,r.settings.easing)}}y()}else if(r.settings.transition==="horizontal"||r.settings.transition==="vertical"){a=r.settings.transition==="horizontal"?"left":"top";t="-"+r.vars.active.index()*(100+r.settings.slideMargin)+"%";if(r.vars.fresh){i.css(a,t);h()}else{f={};if(r.settings.continuous){if(r.vars.jump&&(r.vars.trigger==="controls"||r.vars.trigger==="auto")){n=true;o=t;if(r.vars.first){s=0;r.vars.active.css(a,r.vars.count*(100+r.settings.slideMargin)+"%");t="-"+r.vars.count*(100+r.settings.slideMargin)+"%"}else{s=(r.vars.count-1)*(100+r.settings.slideMargin)+"%";r.vars.active.css(a,-(100+r.settings.slideMargin)+"%");t=100+r.settings.slideMargin+"%"}}}r.vars.active.addClass(r.settings.transClass);if(r.settings.useCSS){f[a]=t;f.transitionDuration=r.settings.speed+"ms";i.addClass(r.settings.transition);i.css(f);e(window).off("focus").on("focus",function(){if(r.vars.moving){i.trigger(r.vars.transition)}});i.one(r.vars.transition,function(){i.removeClass(r.settings.transition);if(n){r.vars.active.css(a,s);f[a]=o;f.transitionDuration="0ms";i.css(f)}h();return this})}else{f[a]=t;i.stop().animate(f,r.settings.speed,r.settings.easing,function(){if(n){r.vars.active.css(a,s);i.css(a,o)}h();return this})}}y()}}else{y();h()}};w=function(e){r.vars.first=false;r.vars.last=false;if(e==="prev"||e===0){r.vars.first=true}else if(e==="next"||e===r.vars.count-1){r.vars.last=true}};i.goToSlide=function(t){var n;if(!r.vars.moving){n=r.vars.active.index();if(t==="prev"){if(n>0){t=n-1}else if(r.settings.loop){t=r.vars.count-1}}else if(t==="next"){if(n<r.vars.count-1){t=n+1}else if(r.settings.loop){t=0}}else{t=t-1}r.vars.jump=false;if(t!=="prev"&&t!=="next"&&(t!==n||r.vars.fresh)){w(t);r.vars.old=r.vars.active;r.vars.active=e(r.vars.slides[t]);if(n===0&&t===r.vars.count-1||n===r.vars.count-1&&t===0){r.vars.jump=true}g()}}};i.goToNextSlide=function(){i.goToSlide("next")};i.goToPrevSlide=function(){i.goToSlide("prev")};f=function(){if(r.settings.pager&&r.vars.count>1){var t,n,s;t=r.vars.slides.length;s=e('<ul class="'+r.settings.pagerClass+'" />');for(n=1;n<t+1;n=n+1){s.append(e("<li />").append(e('<a href="#'+n+'">'+n+"</a>")))}r.vars.slippryWrapper.append(s);e("."+r.settings.pagerClass+" a",r.vars.slippryWrapper).click(function(){r.vars.trigger="pager";i.goToSlide(parseInt(this.hash.split("#")[1],10));return false});v()}};l=function(){if(r.settings.controls&&r.vars.count>1){r.vars.slideWrapper.append(e('<ul class="'+r.settings.controlClass+'" />').append('<li class="'+r.settings.prevClass+'"><a href="#prev">'+r.settings.prevText+"</a></li>").append('<li class="'+r.settings.nextClass+'"><a href="#next">'+r.settings.nextText+"</a></li>"));e("."+r.settings.controlClass+" a",r.vars.slippryWrapper).click(function(){r.vars.trigger="controls";i.goToSlide(this.hash.split("#")[1]);return false});b()}};d=function(){if(r.settings.captions!==false){if(r.settings.captions==="overlay"){r.vars.slideWrapper.append(e('<div class="sy-caption-wrap" />').html(T("<div />",r.settings.captionsEl)))}else if(r.settings.captions==="below"){r.vars.slippryWrapper.append(e('<div class="sy-caption-wrap" />').html(T("<div />",r.settings.captionsEl)))}}};x=function(){i.goToSlide(r.vars.active.index()+1)};S=function(t){var n,i,s,o;o=r.settings.preload==="all"?t:r.vars.active;s=e("img, iframe",o);n=s.length;if(n===0){x();return}i=0;s.each(function(){e(this).one("load error",function(){if(++i===n){x()}}).each(function(){if(this.complete){e(this).load()}})})};i.getCurrentSlide=function(){return r.vars.active};i.getSlideCount=function(){return r.vars.count};i.destroySlider=function(){if(r.vars.fresh===false){i.stopAuto();r.vars.moving=false;r.vars.slides.each(function(){if(e(this).data("sy-cssBckup")!==undefined){e(this).attr("style",e(this).data("sy-cssBckup"))}else{e(this).removeAttr("style")}if(e(this).data("sy-classBckup")!==undefined){e(this).attr("class",e(this).data("sy-classBckup"))}else{e(this).removeAttr("class")}});if(i.data("sy-cssBckup")!==undefined){i.attr("style",i.data("sy-cssBckup"))}else{i.removeAttr("style")}if(i.data("sy-classBckup")!==undefined){i.attr("class",i.data("sy-classBckup"))}else{i.removeAttr("class")}r.vars.slippryWrapper.before(i);r.vars.slippryWrapper.remove();r.vars.fresh=undefined}};i.reloadSlider=function(){i.destroySlider();u()};u=function(){var s;r.settings=e.extend({},t,n);r.vars.slides=e(r.settings.elements,i);r.vars.count=r.vars.slides.length;if(r.settings.useCSS){if(!E("transition")){r.settings.useCSS=false}r.vars.transition=p()}i.data("sy-cssBckup",i.attr("style"));i.data("sy-classBackup",i.attr("class"));i.addClass(r.settings.boxClass).wrap(r.settings.slippryWrapper).wrap(r.settings.slideWrapper).wrap(r.settings.slideCrop);r.vars.slideWrapper=i.parent().parent();r.vars.slippryWrapper=r.vars.slideWrapper.parent().addClass(r.settings.loadingClass);r.vars.fresh=true;r.vars.slides.each(function(){e(this).addClass("sy-slide "+r.settings.transition);if(r.settings.useCSS){e(this).addClass("useCSS")}if(r.settings.transition==="horizontal"){e(this).css("left",e(this).index()*(100+r.settings.slideMargin)+"%")}else if(r.settings.transition==="vertical"){e(this).css("top",e(this).index()*(100+r.settings.slideMargin)+"%")}});if(r.vars.count>1||r.settings.initSingle){if(e("."+r.settings.activeClass,i).index()===-1){if(r.settings.start==="random"){s=Math.round(Math.random()*(r.vars.count-1))}else if(r.settings.start>0&&r.settings.start<=r.vars.count){s=r.settings.start-1}else{s=0}r.vars.active=e(r.vars.slides[s]).addClass(r.settings.activeClass)}else{r.vars.active=e("."+r.settings.activeClass,i)}l();f();S(r.vars.slides)}else{return this}};u();return this}})(jQuery)